plugins {
    id 'java'
    id 'org.jetbrains.kotlin.jvm' version '1.3.50'
    id 'com.github.johnrengelman.shadow' version '4.0.4'
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'org.jetbrains.kotlin.jvm'
    
    group = 'nl.knokko.trollwars'
    version = '1.0'

    repositories {
        mavenCentral()
    }

    compileKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }
    compileTestKotlin {
        kotlinOptions.jvmTarget = "1.8"
    }

    sourceCompatibility = 1.8
    project.ext.jomlVersion = "1.9.19"
    project.ext.lwjglVersion = "3.2.3"

    dependencies {
        implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
        testImplementation 'io.kotlintest:kotlintest-runner-junit5:3.3.2'
        testCompile group: 'junit', name: 'junit', version: '4.12'
    }

}

project(':vulko-textures') {
    dependencies {
        implementation project(':vulko-util')
        implementation project(':vulko-memory')
    }
}

project(':vulko-models') {
    dependencies {
        implementation project(':vulko-util')
        implementation project(':vulko-memory')
        implementation project(':vulko-textures')

        compile "org.lwjgl:lwjgl:$lwjglVersion"
        compile "org.joml:joml:$jomlVersion"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-windows"
        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-linux"
        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-macos"
    }
}

project(':vulko-core') {
    dependencies {
        compile "org.lwjgl:lwjgl:$lwjglVersion"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion"
        compile "org.lwjgl:lwjgl-vulkan:$lwjglVersion"
        compile "org.joml:joml:$jomlVersion"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-windows"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-windows"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-linux"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-linux"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-macos"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-macos"
        compile "org.lwjgl:lwjgl-vulkan:$lwjglVersion:natives-macos"
    }
}

project(':trollwars-textures') {
    dependencies {
        implementation project(':vulko-util')
        implementation project(':vulko-memory')
        implementation project(':vulko-textures')
    }
}

project(':trollwars-models') {
    dependencies {
        implementation project(':vulko-util')
        implementation project(':vulko-memory')
        implementation project(':vulko-textures')
        implementation project(':vulko-models')
        implementation project(':trollwars-textures')

        compile "org.lwjgl:lwjgl:$lwjglVersion"
        compile "org.joml:joml:$jomlVersion"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-windows"
        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-linux"
        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-macos"
    }
}

project(':model-viewer') {
    dependencies {
        implementation project(':vulko-util')
        implementation project(':vulko-memory')
        implementation project(':vulko-textures')
        implementation project(':vulko-models')
        implementation project(':trollwars-textures')
        implementation project(':trollwars-models')

        compile "org.lwjgl:lwjgl:$lwjglVersion"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion"
        compile "org.lwjgl:lwjgl-opengl:$lwjglVersion"
        compile "org.joml:joml:$jomlVersion"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-windows"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-windows"
        compile "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-windows"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-linux"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-linux"
        compile "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-linux"

        compile "org.lwjgl:lwjgl:$lwjglVersion:natives-macos"
        compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-macos"
        compile "org.lwjgl:lwjgl-opengl:$lwjglVersion:natives-macos"
    }
}

shadowJar {
    manifest {
        attributes ('Main-Class': 'trollwars.test.LaunchTestKt')
    }
}

dependencies {
    implementation project(':vulko-core')
    implementation project(':vulko-util')
    implementation project(':vulko-memory')
    implementation project(':vulko-textures')
    implementation project(':vulko-models')
    implementation project(':trollwars-textures')
    implementation project(':trollwars-models')

    compile "org.lwjgl:lwjgl:$lwjglVersion"
    compile "org.lwjgl:lwjgl-glfw:$lwjglVersion"
    compile "org.lwjgl:lwjgl-vulkan:$lwjglVersion"
    compile "org.joml:joml:$jomlVersion"

    compile "org.lwjgl:lwjgl:$lwjglVersion:natives-windows"
    compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-windows"

    compile "org.lwjgl:lwjgl:$lwjglVersion:natives-linux"
    compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-linux"

    compile "org.lwjgl:lwjgl:$lwjglVersion:natives-macos"
    compile "org.lwjgl:lwjgl-glfw:$lwjglVersion:natives-macos"
    compile "org.lwjgl:lwjgl-vulkan:$lwjglVersion:natives-macos"
}